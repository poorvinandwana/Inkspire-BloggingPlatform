{% extends "base/base.html" %}
{% load static %}

{% block content %}

{% for post in featured_post %}
{% if forloop.first %}
<main class="container">
  <div class="p-4 p-md-5 mb-4 rounded text-body-emphasis bg-body-secondary"
       style="background-image: url({{post.blog_image.url}}); background-blend-mode: overlay; background-size: cover;
              background-position: center; color: #fff;">
    <div class="col-lg-6 px-0">
      <h1 class="display-4 fst-italic">
        <a href="{% url 'blogs' post.slug %}" style="color: inherit; text-decoration: none;">{{post.title}}</a>
      </h1>
      <p class="lead my-3">
        {{post.short_description}}
      </p>
      <p class="lead mb-0">
        <a href = "{% url 'blogs' post.slug %}" class="text-body-emphasis fw-bold">Continue reading...</a>
      </p>
    </div>
  </div>
{% endif %}
{% endfor %}

<h2 class="fst-italic">Featured Blogs</h2>
<div class="row mb-2">
  {% for post in featured_post %}
  {% if not forloop.first %}
  <div class="col-md-6">
    <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
      <div class="col p-4 d-flex flex-column position-static">
        <strong class="d-inline-block mb-2 text-primary-emphasis">{{post.category}}</strong>
        <h4 class="mb-0">{{post.title}}</h4>
                
        <div class="mb-1 text-body-secondary">{{post.author}} | {{post.created_at|date:"F j, Y"}}</div>
        <p class="card-text mb-auto">
          {{post.short_description|truncatewords:10 }}
        </p>
        <a href="{% url 'blogs' post.slug %}" class="icon-link gap-1 icon-link-hover stretched-link">
          Continue reading
          <svg class="bi" aria-hidden="true">
            <use xlink:href="#chevron-right"></use>
          </svg>
        </a>
      </div>
      <div class="col-auto d-none d-lg-block">
        {% if post.blog_image %}
    <img src="{{ post.blog_image.url }}" width="300" height="250" alt="Thumbnail">
{% else %}
    <svg width="300" height="250" role="img" class="bd-placeholder-img">
        <rect width="100%" height="100%" fill="#55595c"></rect>
        <text x="50%" y="50%" fill="#eceeef" dy=".3em" text-anchor="middle">Thumbnail</text>
    </svg>
{% endif %}
      </div>
    </div>
  </div>
  {% endif %}
  {% endfor %}
</div>

<h2 class="fst-italic">Latest Posts</h2>
<div class="row g-5">
  <div class="col-md-8">
    {% for p in posts %}
    <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
      <div class="col p-4 d-flex flex-column position-static">
        <strong class="d-inline-block mb-2 text-primary-emphasis">{{p.category}}</strong>
        <h4 class="mb-0">{{p.title}}</h4>
        
        <div class="mb-1 text-body-secondary">{{p.author}} | {{p.created_at|timesince }}</div>
        <p class="card-text mb-auto">
          {{p.short_description|truncatewords:12 }}
        </p>
        <a href="{% url 'blogs' p.slug %}" class="icon-link gap-1 icon-link-hover stretched-link">
          Continue reading
          <svg class="bi" aria-hidden="true">
            <use xlink:href="#chevron-right"></use>
          </svg>
        </a>
      </div>
      <div class="col-auto d-none d-lg-block">
        {% if p.blog_image %}
    <img src="{{ p.blog_image.url }}" width="300" height="250" alt="Thumbnail">
{% else %}
    <svg width="300" height="250" role="img" class="bd-placeholder-img">
        <rect width="100%" height="100%" fill="#55595c"></rect>
        <text x="50%" y="50%" fill="#eceeef" dy=".3em" text-anchor="middle">Thumbnail</text>
    </svg>
{% endif %}
      </div>
    </div>
    {% endfor %}
  </div>

  <div class="col-md-4">
    <div class="position-sticky" style="top: 2rem">
      <div class="p-4 mb-3 bg-body-tertiary rounded">
        <h4 class="fst-italic">About</h4>
        <p class="mb-0">
          Welcome to Inkspire, a space where ideas spark, stories unfold, and curiosity finds a home. Here, you’ll discover thoughtful posts across design, tech, lifestyle, science, business, and more, all crafted to inform, inspire, and make you think. Whether you’re here to learn, explore, or simply enjoy a good read, there’s something for every kind of mind.
          <br>
          Stay curious. Stay inspired.
        </p>
      </div>

      <div class="p-4">
        <h4 class="fst-italic">Follow Us</h4>
        <ol class="list-unstyled">
          <li><a href="https://github.com/poorvinandwana">GitHub</a></li>
          <li><a href="https://www.linkedin.com/in/poorvi-nandwana-5111b72b5/">LinkedIn</a></li>
        </ol>
      </div>
    </div>
  </div>
</div>
</main>
{% endblock %}